import{r as l,j as e}from"./index-BAvknh-B.js";const F=({onUpload:g,accept:p="image/*",label:j,existingUrl:t})=>{const[v,u]=l.useState(null),[i,h]=l.useState(t||""),[N,o]=l.useState(!1),[m,n]=l.useState(0),f=a=>{const s=a.target.files[0];if(!s)return;u(s);const r=new FileReader;r.onloadend=()=>{h(r.result)},r.readAsDataURL(s),x(s)},x=async a=>{if(!a)return;o(!0),n(0);const s=new FormData;s.append("file",a);try{const r=setInterval(()=>{n(d=>d>=90?(clearInterval(r),d):d+10)},100),c=await g(s);return clearInterval(r),n(100),c?.url&&h(c.url),setTimeout(()=>{o(!1),n(0)},500),c}catch(r){throw console.error("Upload failed:",r),o(!1),n(0),r}},b=l.useCallback(a=>{a.preventDefault();const s=a.dataTransfer.files[0];s&&s.type.startsWith("image/")&&(u(s),x(s))},[]),w=l.useCallback(a=>{a.preventDefault()},[]);return e.jsxs("div",{className:"media-uploader",children:[e.jsx("label",{className:"uploader-label",children:j}),e.jsx("div",{className:`upload-area ${i?"has-preview":""}`,onDrop:b,onDragOver:w,children:i?e.jsxs("div",{className:"preview-container",children:[e.jsx("img",{src:i,alt:"Preview",className:"preview-image"}),e.jsx("div",{className:"preview-overlay",children:e.jsxs("label",{className:"change-file-btn",children:["Change File",e.jsx("input",{type:"file",accept:p,onChange:f,style:{display:"none"}})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"upload-icon",children:"üìÅ"}),e.jsx("p",{className:"upload-text",children:"Drag & drop or click to upload"}),e.jsxs("label",{className:"file-input-label",children:["Choose File",e.jsx("input",{type:"file",accept:p,onChange:f,className:"file-input"})]}),e.jsx("p",{className:"upload-hint",children:"Supports: JPG, PNG, GIF, MP4, PDF"})]})}),N&&e.jsxs("div",{className:"upload-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${m}%`}})}),e.jsxs("span",{className:"progress-text",children:["Uploading... ",m,"%"]})]}),t&&!v&&e.jsxs("div",{className:"existing-url",children:[e.jsx("span",{className:"url-label",children:"Current URL:"}),e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"url-link",children:[t.substring(0,50),"..."]})]})]})};export{F as M};
