import{r as l,q as c,j as s}from"./index-DN2QgEtp.js";import{F as b}from"./FormField-BPRme1e3.js";import{C as R}from"./ConfirmModal-87vAIZv7.js";import{u as T}from"./useToast-C_6R7hpL.js";import{S as y}from"./constants-CQ7fvwyQ.js";import{b as O}from"./validators-BHQTkbpi.js";/* empty css                */const G=()=>{const[v,n]=l.useState([]),[o,L]=l.useState(null),[N,i]=l.useState(!1),[C,U]=l.useState(!0),[w,d]=l.useState(!1),[m,g]=l.useState(null),[u,f]=l.useState({}),{showSuccess:h,showError:p}=T(),[r,x]=l.useState({platform:"",url:"",iconUrl:""});l.useEffect(()=>{D()},[]);const D=async()=>{try{const e=await c.getAll();n(e.data||[])}catch(e){console.error("Failed to fetch social links:",e)}finally{U(!1)}},j=(e,a)=>{x(t=>({...t,[e]:a})),u[e]&&f(t=>({...t,[e]:""}))},F=()=>{const e={};return r.platform||(e.platform="Platform is required"),r.url?O(r.url)||(e.url="Please enter a valid URL"):e.url="URL is required",f(e),Object.keys(e).length===0},E=async e=>{if(e.preventDefault(),!F()){p("Please fix the errors in the form");return}try{if(o){const a=await c.update(o._id,r);n(t=>t.map(k=>k._id===o._id?a.data:k)),h("Social link updated successfully")}else{const a=await c.create(r);n(t=>[...t,a.data]),h("Social link added successfully")}S(),i(!1)}catch{p("Failed to save social link")}},A=e=>{L(e),x({platform:e.platform,url:e.url,iconUrl:e.iconUrl||""}),i(!0)},_=async()=>{if(m)try{await c.delete(m._id),n(e=>e.filter(a=>a._id!==m._id)),h("Social link deleted successfully")}catch{p("Failed to delete social link")}finally{g(null),d(!1)}},S=()=>{x({platform:"",url:"",iconUrl:""}),L(null),f({})},P=e=>{const a=y.find(t=>t.value===e);return a?a.icon:"ðŸ”—"};return C?s.jsx("div",{className:"section-loading",children:"Loading social links..."}):s.jsxs("div",{className:"section-container",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h1",{children:"Social Links"}),s.jsx("p",{children:"Manage your social media and professional profile links"})]}),s.jsxs("div",{className:"section-content",children:[s.jsx("div",{className:"section-actions",children:s.jsx("button",{className:"btn-primary",onClick:()=>{S(),i(!0)},children:"+ Add Social Link"})}),N&&s.jsxs("div",{className:"form-card",children:[s.jsx("h2",{children:o?"Edit Social Link":"Add New Social Link"}),s.jsxs("form",{onSubmit:E,children:[s.jsx(b,{label:"Platform",type:"select",value:r.platform,onChange:e=>j("platform",e),options:y.map(e=>({value:e.value,label:`${e.icon} ${e.label}`})),required:!0,error:u.platform}),s.jsx(b,{label:"Profile URL",type:"url",value:r.url,onChange:e=>j("url",e),placeholder:"https://github.com/username",required:!0,error:u.url,helperText:"Enter your full profile URL"}),s.jsx(b,{label:"Custom Icon URL (Optional)",type:"url",value:r.iconUrl,onChange:e=>j("iconUrl",e),placeholder:"https://example.com/icon.png",helperText:"Optional: Custom icon URL. Leave blank to use platform default."}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{i(!1),S()},children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn-primary",children:o?"Update":"Create"})]})]})]}),s.jsx("div",{className:"items-grid",children:v.map(e=>{const a=y.find(t=>t.value===e.platform);return s.jsxs("div",{className:"item-card social-card",children:[s.jsx("div",{className:"social-icon",children:e.iconUrl?s.jsx("img",{src:e.iconUrl,alt:e.platform}):s.jsx("span",{className:"platform-icon",children:P(e.platform)})}),s.jsxs("div",{className:"item-content",children:[s.jsx("h3",{className:"item-title",children:a?a.label:e.platform}),s.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"social-url",children:e.url}),s.jsxs("div",{className:"item-actions",children:[s.jsx("button",{className:"btn-edit",onClick:()=>A(e),children:"Edit"}),s.jsx("button",{className:"btn-delete",onClick:()=>{g(e),d(!0)},children:"Delete"})]})]})]},e._id)})}),v.length===0&&!N&&s.jsxs("div",{className:"empty-state",children:[s.jsx("div",{className:"empty-icon",children:"ðŸ”—"}),s.jsx("h3",{children:"No Social Links Yet"}),s.jsx("p",{children:"Add your social media and professional profile links"}),s.jsx("button",{className:"btn-primary",onClick:()=>i(!0),children:"Add First Social Link"})]})]}),s.jsx(R,{isOpen:w,onClose:()=>d(!1),onConfirm:_,title:"Delete Social Link",message:"Are you sure you want to delete this social link? This action cannot be undone.",confirmText:"Delete Social Link"})]})};export{G as default};
