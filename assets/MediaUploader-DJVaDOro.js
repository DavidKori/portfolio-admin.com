import{r,j as e}from"./index-BsKevn0t.js";const F=({onUpload:g,accept:i="image/*",label:j,existingUrl:o})=>{const[v,u]=r.useState(null),[n,h]=r.useState(o||""),[N,c]=r.useState(!1),[m,t]=r.useState(0),x=a=>{const s=a.target.files[0];if(!s)return;u(s);const l=new FileReader;l.onloadend=()=>{h(l.result)},l.readAsDataURL(s),f(s)},f=async a=>{if(!a)return;c(!0),t(0);const s=new FormData;s.append("file",a);try{const l=setInterval(()=>{t(p=>p>=90?(clearInterval(l),p):p+10)},100),d=await g(s);return clearInterval(l),t(100),d?.url&&h(d.url),setTimeout(()=>{c(!1),t(0)},500),d}catch(l){throw console.error("Upload failed:",l),c(!1),t(0),l}},w=r.useCallback(a=>{a.preventDefault();const s=a.dataTransfer.files[0];s&&s.type.startsWith("image/")&&(u(s),f(s))},[]),b=r.useCallback(a=>{a.preventDefault()},[]);return e.jsxs("div",{className:"media-uploader",children:[e.jsx("label",{className:"uploader-label",children:j}),e.jsx("div",{className:`upload-area ${n?"has-preview":""}`,onDrop:w,onDragOver:b,children:n?e.jsxs("div",{className:"preview-container",children:[i===".pdf"?e.jsx("embed",{src:n,type:"application/pdf",className:"preview-image",width:"100%",height:"600px"}):e.jsx("img",{src:n,alt:"Preview",className:"preview-image"}),e.jsx("div",{className:"preview-overlay",children:e.jsxs("label",{className:"change-file-btn",children:["Change File",e.jsx("input",{type:"file",accept:i,onChange:x,style:{display:"none"}})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"upload-icon",children:"üìÅ"}),e.jsx("p",{className:"upload-text",children:"Drag & drop or click to upload"}),e.jsxs("label",{className:"file-input-label",children:["Choose File",e.jsx("input",{type:"file",accept:i,onChange:x,className:"file-input"})]}),e.jsx("p",{className:"upload-hint",children:"Supports: JPG, PNG, GIF, MP4, PDF"})]})}),N&&e.jsxs("div",{className:"upload-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${m}%`}})}),e.jsxs("span",{className:"progress-text",children:["Uploading... ",m,"%"]})]}),o&&!v&&e.jsxs("div",{className:"existing-url",children:[e.jsx("span",{className:"url-label",children:"Current URL:"}),e.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"url-link"})]})]})};export{F as M};
