import{r as i,g as r,j as e}from"./index-Dhn4FSEV.js";import{F as v}from"./FormField-DHWh7EVa.js";import{M as Y}from"./MediaUploader-D3znFzoQ.js";import{C as _}from"./ConfirmModal-BwP93wYg.js";import{u as k}from"./useToast-DBB8N4lx.js";import{Y as M}from"./constants-CQ7fvwyQ.js";/* empty css                */const z=()=>{const[y,o]=i.useState([]),[n,g]=i.useState(null),[N,l]=i.useState(!1),[S,U]=i.useState(!0),[C,h]=i.useState(!1),[u,A]=i.useState(null),[p,b]=i.useState(!1),{showSuccess:d,showError:x}=k(),[a,f]=i.useState({title:"",description:"",year:new Date().getFullYear().toString(),iconUrl:""});i.useEffect(()=>{D()},[]);const D=async()=>{try{const t=await r.getAll();o(t.data||[])}catch(t){console.error("Failed to fetch achievements:",t)}finally{U(!1)}},m=(t,s)=>{f(c=>({...c,[t]:s}))},F=async t=>{b(!0);try{const s=await r.uploadIcon(t);return m("iconUrl",s.data.url),d("Icon uploaded successfully"),s.data}catch(s){throw x("Failed to upload icon"),s}finally{b(!1)}},E=async t=>{t.preventDefault();try{if(n){const s=await r.update(n._id,a);o(c=>c.map(w=>w._id===n._id?s.data:w)),d("Achievement updated successfully")}else{const s=await r.create(a);o(c=>[...c,s.data]),d("Achievement added successfully")}j(),l(!1)}catch{x("Failed to save achievement")}},I=t=>{g(t),f({title:t.title,description:t.description,year:t.year,iconUrl:t.iconUrl||""}),l(!0)},T=async()=>{if(u)try{await r.delete(u._id),o(t=>t.filter(s=>s._id!==u._id)),d("Achievement deleted successfully")}catch{x("Failed to delete achievement")}finally{A(null),h(!1)}},j=()=>{f({title:"",description:"",year:new Date().getFullYear().toString(),iconUrl:""}),g(null)};return S?e.jsx("div",{className:"section-loading",children:"Loading achievements..."}):e.jsxs("div",{className:"section-container",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h1",{children:"Achievements"}),e.jsx("p",{children:"Showcase your awards, recognitions, and milestones"})]}),e.jsxs("div",{className:"section-content",children:[e.jsx("div",{className:"section-actions",children:e.jsx("button",{className:"btn-primary",onClick:()=>{j(),l(!0)},children:"+ Add Achievement"})}),N&&e.jsxs("div",{className:"form-card",children:[e.jsx("h2",{children:n?"Edit Achievement":"Add New Achievement"}),e.jsxs("form",{onSubmit:E,children:[e.jsx(v,{label:"Title",value:a.title,onChange:t=>m("title",t),required:!0,placeholder:"e.g., Employee of the Year, Hackathon Winner"}),e.jsx(v,{label:"Description",value:a.description,onChange:t=>m("description",t),multiline:!0,rows:3,placeholder:"Describe the achievement and its significance",required:!0}),e.jsx("div",{className:"grid-2",children:e.jsx(v,{label:"Year",type:"select",value:a.year,onChange:t=>m("year",t),options:M.map(t=>({value:t.toString(),label:t.toString()})),required:!0})}),e.jsx(Y,{label:"Icon or Award Image",onUpload:F,accept:"image/*",existingUrl:a.iconUrl,helperText:"Optional: Upload an icon or image representing this achievement"}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{l(!1),j()},disabled:p,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:p,children:p?"Uploading...":n?"Update":"Create"})]})]})]}),e.jsx("div",{className:"items-grid",children:y.map(t=>e.jsxs("div",{className:"item-card",children:[e.jsxs("div",{className:"item-header",children:[e.jsx("div",{className:"item-icon",children:t.iconUrl?e.jsx("img",{src:t.iconUrl,alt:t.title}):e.jsx("span",{className:"default-icon",children:"ðŸ†"})}),e.jsx("div",{className:"item-year",children:t.year})]}),e.jsxs("div",{className:"item-content",children:[e.jsx("h3",{className:"item-title",children:t.title}),e.jsx("p",{className:"item-description",children:t.description}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-edit",onClick:()=>I(t),children:"Edit"}),e.jsx("button",{className:"btn-delete",onClick:()=>{A(t),h(!0)},children:"Delete"})]})]})]},t._id))}),y.length===0&&!N&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"ðŸ†"}),e.jsx("h3",{children:"No Achievements Yet"}),e.jsx("p",{children:"Add your awards and recognitions to showcase your success"}),e.jsx("button",{className:"btn-primary",onClick:()=>l(!0),children:"Add First Achievement"})]})]}),e.jsx(_,{isOpen:C,onClose:()=>h(!1),onConfirm:T,title:"Delete Achievement",message:"Are you sure you want to delete this achievement? This action cannot be undone.",confirmText:"Delete Achievement"})]})};export{z as default};
