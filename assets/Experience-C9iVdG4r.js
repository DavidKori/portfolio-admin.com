import{r as t,k as m,j as e}from"./index-oJNRt4ru.js";import{F as p}from"./FormField-BDRa3sq8.js";import{C as Y}from"./ConfirmModal-CRzLWbSk.js";import{u as A}from"./useToast-C6tjpuCn.js";/* empty css                */const I=()=>{const[h,o]=t.useState([]),[l,N]=t.useState(null),[b,a]=t.useState(!1),[g,C]=t.useState(!0),[w,u]=t.useState(!1),[x,v]=t.useState(null),{showSuccess:j,showError:E}=A(),[r,y]=t.useState({role:"",company:"",period:"",description:""});t.useEffect(()=>{D()},[]);const D=async()=>{try{const s=await m.getAll();o(s.data||[])}catch(s){console.error("Failed to fetch experiences:",s)}finally{C(!1)}},c=(s,i)=>{y(n=>({...n,[s]:i}))},k=async s=>{s.preventDefault();try{if(l){const i=await m.update(l._id,r);o(n=>n.map(d=>d._id===l._id?i.data:d)),j("Experience updated successfully")}else{const i=await m.create(r);o(n=>[...n,i.data]),j("Experience added successfully")}f(),a(!1)}catch{E("Failed to save experience")}},F=s=>{N(s),y({role:s.role,company:s.company,period:s.period,description:s.description}),a(!0)},S=async()=>{if(x)try{await m.delete(x._id),o(s=>s.filter(i=>i._id!==x._id)),j("Experience deleted successfully")}catch{E("Failed to delete experience")}finally{v(null),u(!1)}},f=()=>{y({role:"",company:"",period:"",description:""}),N(null)};return g?e.jsx("div",{className:"section-loading",children:"Loading experiences..."}):e.jsxs("div",{className:"section-container",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h1",{children:"Work Experience"}),e.jsx("p",{children:"Manage your professional work history"})]}),e.jsxs("div",{className:"section-content",children:[e.jsx("div",{className:"section-actions",children:e.jsx("button",{className:"btn-primary",onClick:()=>{f(),a(!0)},children:"+ Add Experience"})}),b&&e.jsxs("div",{className:"form-card",children:[e.jsx("h2",{children:l?"Edit Experience":"Add New Experience"}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"grid-2",children:[e.jsx(p,{label:"Job Title / Role",value:r.role,onChange:s=>c("role",s),required:!0,placeholder:"e.g., Senior Frontend Developer"}),e.jsx(p,{label:"Company",value:r.company,onChange:s=>c("company",s),required:!0,placeholder:"e.g., Google Inc."})]}),e.jsx(p,{label:"Employment Period",value:r.period,onChange:s=>c("period",s),placeholder:"e.g., June 2020 - Present",required:!0,helperText:"Format: Month YYYY - Month YYYY or Month YYYY - Present"}),e.jsx(p,{label:"Job Description & Responsibilities",value:r.description,onChange:s=>c("description",s),multiline:!0,rows:6,placeholder:"Describe your responsibilities, achievements, and technologies used...",required:!0,helperText:"Use bullet points for better readability"}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{a(!1),f()},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",children:l?"Update":"Create"})]})]})]}),e.jsx("div",{className:"timeline",children:h.map((s,i)=>e.jsxs("div",{className:"timeline-item",children:[e.jsxs("div",{className:"timeline-marker",children:[e.jsx("div",{className:"marker-dot"}),i!==h.length-1&&e.jsx("div",{className:"timeline-line"})]}),e.jsxs("div",{className:"timeline-content",children:[e.jsxs("div",{className:"timeline-header",children:[e.jsx("h3",{className:"timeline-title",children:s.role}),e.jsx("span",{className:"timeline-period",children:s.period})]}),e.jsx("div",{className:"timeline-company",children:s.company}),e.jsx("div",{className:"timeline-description",children:s.description.split(`
`).map((n,d)=>e.jsx("p",{children:n},d))}),e.jsxs("div",{className:"timeline-actions",children:[e.jsx("button",{className:"btn-edit",onClick:()=>F(s),children:"Edit"}),e.jsx("button",{className:"btn-delete",onClick:()=>{v(s),u(!0)},children:"Delete"})]})]})]},s._id))}),h.length===0&&!b&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"ðŸ’¼"}),e.jsx("h3",{children:"No Work Experience Added"}),e.jsx("p",{children:"Add your professional work history and roles"}),e.jsx("button",{className:"btn-primary",onClick:()=>a(!0),children:"Add First Experience"})]})]}),e.jsx(Y,{isOpen:w,onClose:()=>u(!1),onConfirm:S,title:"Delete Experience",message:"Are you sure you want to delete this work experience? This action cannot be undone.",confirmText:"Delete Experience"})]})};export{I as default};
