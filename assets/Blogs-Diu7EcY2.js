import{r as a,l as c,j as t}from"./index-CuGo0VHM.js";import{F as d}from"./FormField-DV9xFr-W.js";import{M as A}from"./MediaUploader-CykmVJun.js";import{C as I}from"./ConfirmModal-D0vBWr9t.js";import{u as E}from"./useToast-CRbyvKE3.js";/* empty css                */const Y=()=>{const[y,u]=a.useState([]),[n,b]=a.useState(null),[N,r]=a.useState(!1),[S,C]=a.useState(!0),[D,h]=a.useState(!1),[g,v]=a.useState(null),[p,B]=a.useState(!1),{showSuccess:m,showError:x}=E(),[l,j]=a.useState({title:"",content:"",imageUrl:"",author:"",date:new Date().toISOString().split("T")[0],url:""});a.useEffect(()=>{U()},[]);const U=async()=>{try{const e=await c.getAll();u(e.data||[])}catch(e){console.error("Failed to fetch blogs:",e)}finally{C(!1)}},o=(e,s)=>{j(i=>({...i,[e]:s}))},F=async e=>{B(!0);try{const s=await c.uploadImage(e);return o("imageUrl",s.data.url),m("Blog image uploaded successfully"),s.data}catch(s){throw x("Failed to upload image"),s}finally{B(!1)}},P=async e=>{e.preventDefault();try{if(n){const s=await c.update(n._id,l);u(i=>i.map(w=>w._id===n._id?s.data:w)),m("Blog updated successfully")}else{const s=await c.create(l);u(i=>[...i,s.data]),m("Blog added successfully")}f(),r(!1)}catch{x("Failed to save blog")}},T=e=>{b(e),j({title:e.title,content:e.content,imageUrl:e.imageUrl||"",author:e.author||"",date:e.date.split("T")[0],url:e.url||""}),r(!0)},k=async()=>{if(g)try{await c.delete(g._id),u(e=>e.filter(s=>s._id!==g._id)),m("Blog deleted successfully")}catch{x("Failed to delete blog")}finally{v(null),h(!1)}},f=()=>{j({title:"",content:"",imageUrl:"",author:"",date:new Date().toISOString().split("T")[0],url:""}),b(null)};return S?t.jsx("div",{className:"section-loading",children:"Loading blogs..."}):t.jsxs("div",{className:"section-container",children:[t.jsxs("div",{className:"section-header",children:[t.jsx("h1",{children:"Blog Posts"}),t.jsx("p",{children:"Manage your blog posts and articles"})]}),t.jsxs("div",{className:"section-content",children:[t.jsx("div",{className:"section-actions",children:t.jsx("button",{className:"btn-primary",onClick:()=>{f(),r(!0)},children:"+ Add Blog Post"})}),N&&t.jsxs("div",{className:"form-card",children:[t.jsx("h2",{children:n?"Edit Blog Post":"Add New Blog Post"}),t.jsxs("form",{onSubmit:P,children:[t.jsx(d,{label:"Blog Title",value:l.title,onChange:e=>o("title",e),required:!0,placeholder:"e.g., Building Scalable React Applications"}),t.jsx(d,{label:"Blog Content",value:l.content,onChange:e=>o("content",e),multiline:!0,rows:10,placeholder:"Write your blog content here...",required:!0}),t.jsxs("div",{className:"grid-2",children:[t.jsx(d,{label:"Author",value:l.author,onChange:e=>o("author",e),placeholder:"Your name"}),t.jsx(d,{label:"Publish Date",type:"date",value:l.date,onChange:e=>o("date",e),required:!0})]}),t.jsx(d,{label:"Blog URL (Optional)",type:"url",value:l.url,onChange:e=>o("url",e),placeholder:"https://medium.com/@username/blog-post",helperText:"Link to your published blog post (Medium, Dev.to, etc.)"}),t.jsx(A,{label:"Featured Image",onUpload:F,accept:"image/*",existingUrl:l.imageUrl,helperText:"Upload a featured image for your blog post"}),t.jsxs("div",{className:"form-actions",children:[t.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{r(!1),f()},disabled:p,children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn-primary",disabled:p,children:p?"Uploading...":n?"Update":"Create"})]})]})]}),t.jsx("div",{className:"items-grid",children:y.map(e=>t.jsxs("div",{className:"item-card blog-card",children:[e.imageUrl&&t.jsx("div",{className:"blog-image",children:t.jsx("img",{src:e.imageUrl,alt:e.title})}),t.jsxs("div",{className:"item-content",children:[t.jsxs("div",{className:"blog-meta",children:[t.jsx("span",{className:"blog-date",children:new Date(e.date).toLocaleDateString()}),e.author&&t.jsxs("span",{className:"blog-author",children:["By ",e.author]})]}),t.jsx("h3",{className:"item-title",children:e.title}),t.jsx("p",{className:"item-description",children:e.content.length>150?`${e.content.substring(0,150)}...`:e.content}),t.jsxs("div",{className:"item-actions",children:[e.url&&t.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"blog-link",children:"Read Full Post"}),t.jsx("button",{className:"btn-edit",onClick:()=>T(e),children:"Edit"}),t.jsx("button",{className:"btn-delete",onClick:()=>{v(e),h(!0)},children:"Delete"})]})]})]},e._id))}),y.length===0&&!N&&t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"empty-icon",children:"ðŸ“š"}),t.jsx("h3",{children:"No Blog Posts Yet"}),t.jsx("p",{children:"Add your blog posts and articles to share your knowledge"}),t.jsx("button",{className:"btn-primary",onClick:()=>r(!0),children:"Add First Blog Post"})]})]}),t.jsx(I,{isOpen:D,onClose:()=>h(!1),onConfirm:k,title:"Delete Blog Post",message:"Are you sure you want to delete this blog post? This action cannot be undone.",confirmText:"Delete Blog Post"})]})};export{Y as default};
