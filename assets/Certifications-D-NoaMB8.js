import{r as s,i as n,j as i}from"./index-BsKevn0t.js";import{F as C}from"./FormField-BZwS9Ujl.js";import{M as S}from"./MediaUploader-DJVaDOro.js";import{C as Y}from"./ConfirmModal-hy6Da3yH.js";import{u as I}from"./useToast-CHd64vW6.js";import{Y as B}from"./constants-Dviao9AH.js";/* empty css                */const $=()=>{const[y,m]=s.useState([]),[c,b]=s.useState(null),[N,o]=s.useState(!1),[w,F]=s.useState(!0),[D,g]=s.useState(!1),[p,v]=s.useState(null),[l,u]=s.useState({certificate:!1,image:!1}),{showSuccess:d,showError:h}=I(),[r,x]=s.useState({title:"",issuer:"",year:new Date().getFullYear().toString(),certificateUrl:"",imageUrl:""});s.useEffect(()=>{A()},[]);const A=async()=>{try{const e=await n.getAll();m(e.data||[])}catch(e){console.error("Failed to fetch certifications:",e)}finally{F(!1)}},f=(e,a)=>{x(t=>({...t,[e]:a}))},E=async(e,a)=>{u(t=>({...t,[a]:!0}));try{const t=await n.uploadCertificate(e);return f(a,t.data.url),d("Certificate uploaded successfully"),t.data}catch(t){throw h("Failed to upload certificate"),t}finally{u(t=>({...t,[a]:!1}))}},T=async(e,a)=>{u(t=>({...t,[a]:!0}));try{const t=await n.uploadCertificateBadge(e);return f(a,t.data.url),d("Badge uploaded successfully"),t.data}catch(t){throw h("Failed to upload image"),t}finally{u(t=>({...t,[a]:!1}))}},_=async e=>{e.preventDefault();try{if(c){const a=await n.update(c._id,r);m(t=>t.map(U=>U._id===c._id?a.data:U)),d("Certification updated successfully")}else{const a=await n.create(r);m(t=>[...t,a.data]),d("Certification added successfully")}j(),o(!1)}catch{h("Failed to save certification")}},k=e=>{b(e),x({title:e.title,issuer:e.issuer,year:e.year,certificateUrl:e.certificateUrl||"",imageUrl:e.imageUrl||""}),o(!0)},M=async()=>{if(p)try{await n.delete(p._id),m(e=>e.filter(a=>a._id!==p._id)),d("Certification deleted successfully")}catch{h("Failed to delete certification")}finally{v(null),g(!1)}},j=()=>{x({title:"",issuer:"",year:new Date().getFullYear().toString(),certificateUrl:"",imageUrl:""}),b(null)};return w?i.jsx("div",{className:"section-loading",children:"Loading certifications..."}):i.jsxs("div",{className:"section-container",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h1",{children:"Certifications"}),i.jsx("p",{children:"Manage your professional certifications and badges"})]}),i.jsxs("div",{className:"section-content",children:[i.jsx("div",{className:"section-actions",children:i.jsx("button",{className:"btn-primary",onClick:()=>{j(),o(!0)},children:"+ Add Certification"})}),N&&i.jsxs("div",{className:"form-card",children:[i.jsx("h2",{children:c?"Edit Certification":"Add New Certification"}),i.jsxs("form",{onSubmit:_,children:[i.jsxs("div",{className:"grid-2",children:[i.jsx(C,{label:"Certification Title",value:r.title,onChange:e=>f("title",e),required:!0,placeholder:"e.g., AWS Certified Solutions Architect"}),i.jsx(C,{label:"Issuing Organization",value:r.issuer,onChange:e=>f("issuer",e),required:!0,placeholder:"e.g., Amazon Web Services"})]}),i.jsx(C,{label:"Year Obtained",type:"select",value:r.year,onChange:e=>f("year",e),options:B.map(e=>({value:e.toString(),label:e.toString()})),required:!0}),i.jsxs("div",{className:"media-grid",children:[i.jsx(S,{label:"Certificate File",onUpload:e=>E(e,"certificateUrl"),accept:".pdf,.jpg,.jpeg,.png",existingUrl:r.certificateUrl,helperText:"Upload your certificate PDF or image"}),i.jsx(S,{label:"Badge/Logo Image",onUpload:e=>T(e,"imageUrl"),accept:"image/*",existingUrl:r.imageUrl,helperText:"Optional: Certification badge or issuer logo"})]}),i.jsxs("div",{className:"form-actions",children:[i.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{o(!1),j()},disabled:l.certificate||l.image,children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn-primary",disabled:l.certificate||l.image,children:l.certificate||l.image?"Uploading...":c?"Update":"Create"})]})]})]}),i.jsx("div",{className:"items-grid",children:y.map(e=>i.jsxs("div",{className:"item-card",children:[i.jsxs("div",{className:"item-header",children:[i.jsx("div",{className:"item-image",children:e.imageUrl?i.jsx("img",{src:e.imageUrl,alt:e.title}):i.jsx("div",{className:"default-badge",children:"ðŸ“œ"})}),i.jsx("div",{className:"item-year",children:e.year})]}),i.jsxs("div",{className:"item-content",children:[i.jsx("h3",{className:"item-title",children:e.title}),i.jsxs("div",{className:"item-subtitle",children:["Issued by: ",e.issuer]}),i.jsxs("div",{className:"item-actions",children:[e.certificateUrl&&i.jsx("a",{href:e.certificateUrl,target:"_blank",rel:"noopener noreferrer",className:"view-certificate",children:"View Certificate"}),i.jsx("button",{className:"btn-edit",onClick:()=>k(e),children:"Edit"}),i.jsx("button",{className:"btn-delete",onClick:()=>{v(e),g(!0)},children:"Delete"})]})]})]},e._id))}),y.length===0&&!N&&i.jsxs("div",{className:"empty-state",children:[i.jsx("div",{className:"empty-icon",children:"ðŸ“œ"}),i.jsx("h3",{children:"No Certifications Yet"}),i.jsx("p",{children:"Add your professional certifications and badges"}),i.jsx("button",{className:"btn-primary",onClick:()=>o(!0),children:"Add First Certification"})]})]}),i.jsx(Y,{isOpen:D,onClose:()=>g(!1),onConfirm:M,title:"Delete Certification",message:"Are you sure you want to delete this certification? This action cannot be undone.",confirmText:"Delete Certification"})]})};export{$ as default};
