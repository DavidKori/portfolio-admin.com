import{r as s,h as l,j as t}from"./index-BsKevn0t.js";import{F as p}from"./FormField-BZwS9Ujl.js";import{M as T}from"./MediaUploader-DJVaDOro.js";import{C as _}from"./ConfirmModal-hy6Da3yH.js";import{u as I}from"./useToast-CHd64vW6.js";/* empty css                */const R=()=>{const[y,d]=s.useState([]),[n,N]=s.useState(null),[b,r]=s.useState(!1),[w,U]=s.useState(!0),[S,h]=s.useState(!1),[m,v]=s.useState(null),[f,C]=s.useState(!1),{showSuccess:u,showError:x}=I(),[a,j]=s.useState({degree:"",institution:"",period:"",description:"",certificateUrl:""});s.useEffect(()=>{D()},[]);const D=async()=>{try{const e=await l.getAll();d(e.data||[])}catch(e){console.error("Failed to fetch education:",e)}finally{U(!1)}},c=(e,i)=>{j(o=>({...o,[e]:i}))},F=async e=>{C(!0);try{const i=await l.uploadCertificate(e);return c("certificateUrl",i.data.url),u("Certificate uploaded successfully"),i.data}catch(i){throw x("Failed to upload certificate"),i}finally{C(!1)}},Y=async e=>{e.preventDefault();try{if(n){const i=await l.update(n._id,a);d(o=>o.map(E=>E._id===n._id?i.data:E)),u("Education updated successfully")}else{const i=await l.create(a);d(o=>[...o,i.data]),u("Education added successfully")}g(),r(!1)}catch{x("Failed to save education")}},k=e=>{N(e),j({degree:e.degree,institution:e.institution,period:e.period,description:e.description,certificateUrl:e.certificateUrl||""}),r(!0)},A=async()=>{if(m)try{await l.delete(m._id),d(e=>e.filter(i=>i._id!==m._id)),u("Education deleted successfully")}catch{x("Failed to delete education")}finally{v(null),h(!1)}},g=()=>{j({degree:"",institution:"",period:"",description:""}),N(null)};return w?t.jsx("div",{className:"section-loading",children:"Loading education..."}):t.jsxs("div",{className:"section-container",children:[t.jsxs("div",{className:"section-header",children:[t.jsx("h1",{children:"Education"}),t.jsx("p",{children:"Manage your academic qualifications and certifications"})]}),t.jsxs("div",{className:"section-content",children:[t.jsx("div",{className:"section-actions",children:t.jsx("button",{className:"btn-primary",onClick:()=>{g(),r(!0)},children:"+ Add Education"})}),b&&t.jsxs("div",{className:"form-card",children:[t.jsx("h2",{children:n?"Edit Education":"Add New Education"}),t.jsxs("form",{onSubmit:Y,children:[t.jsxs("div",{className:"grid-2",children:[t.jsx(p,{label:"Degree/Certificate",value:a.degree,onChange:e=>c("degree",e),required:!0,placeholder:"e.g., Bachelor of Science in Computer Science"}),t.jsx(p,{label:"Institution",value:a.institution,onChange:e=>c("institution",e),required:!0,placeholder:"e.g., University of Technology"})]}),t.jsx(p,{label:"Period",value:a.period,onChange:e=>c("period",e),placeholder:"e.g., 2018 - 2022",required:!0,helperText:"Format: YYYY - YYYY or YYYY - Present"}),t.jsx(p,{label:"Description",value:a.description,onChange:e=>c("description",e),multiline:!0,rows:4,placeholder:"Describe your coursework, achievements, and relevant projects..."}),t.jsx(T,{label:"Certificate (Optional)",onUpload:F,accept:".pdf,.jpg,.jpeg,.png",existingUrl:a.certificateUrl,helperText:"Upload your degree certificate or transcript"}),t.jsxs("div",{className:"form-actions",children:[t.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{r(!1),g()},disabled:f,children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn-primary",disabled:f,children:f?"Uploading...":n?"Update":"Create"})]})]})]}),t.jsx("div",{className:"items-list",children:y.map(e=>t.jsxs("div",{className:"list-item",children:[t.jsxs("div",{className:"list-item-content",children:[t.jsxs("div",{className:"list-item-header",children:[t.jsx("h3",{className:"list-item-title",children:e.degree}),t.jsx("span",{className:"list-item-period",children:e.period})]}),t.jsx("div",{className:"list-item-subtitle",children:e.institution}),e.description&&t.jsx("p",{className:"list-item-description",children:e.description}),e.certificateUrl&&t.jsx("a",{href:e.certificateUrl,target:"_blank",rel:"noopener noreferrer",className:"certificate-link",children:"ðŸ“„ View Certificate"})]}),t.jsxs("div",{className:"list-item-actions",children:[t.jsx("button",{className:"btn-edit",onClick:()=>k(e),children:"Edit"}),t.jsx("button",{className:"btn-delete",onClick:()=>{v(e),h(!0)},children:"Delete"})]})]},e._id))}),y.length===0&&!b&&t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"empty-icon",children:"ðŸŽ“"}),t.jsx("h3",{children:"No Education Added"}),t.jsx("p",{children:"Add your academic qualifications and certifications"}),t.jsx("button",{className:"btn-primary",onClick:()=>r(!0),children:"Add First Education"})]})]}),t.jsx(_,{isOpen:S,onClose:()=>h(!1),onConfirm:A,title:"Delete Education",message:"Are you sure you want to delete this education entry? This action cannot be undone.",confirmText:"Delete Education"})]})};export{R as default};
