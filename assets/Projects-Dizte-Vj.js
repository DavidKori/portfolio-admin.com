import{r,p as h,j as t,L as _}from"./index-DN2QgEtp.js";import{F as o}from"./FormField-BPRme1e3.js";import{M as E}from"./MediaUploader-WpIDh3c1.js";import{C as T}from"./ConfirmModal-87vAIZv7.js";import{u as I}from"./useToast-C_6R7hpL.js";/* empty css                */const V=()=>{const[p,c]=r.useState([]),[n,U]=r.useState(null),[y,d]=r.useState(!1),[P,w]=r.useState(!0),[C,j]=r.useState(!1),[g,N]=r.useState(null),[x,S]=r.useState(!1),{showSuccess:m,showError:u}=I(),[l,f]=r.useState({title:"",description:"",techStack:"",imageUrl:"",videoUrl:"",liveUrl:"",githubUrl:""});r.useEffect(()=>{A()},[]);const A=async()=>{try{const e=await h.getAll();c(Array.isArray(e?.data)?e.data:[])}catch(e){console.error("Failed to fetch projects:",e),u("Failed to load projects"),c([])}finally{w(!1)}},i=(e,a)=>{f(s=>({...s,[e]:a}))},D=async e=>{S(!0);try{const a=await h.uploadMedia(e);return i("imageUrl",a.data.url),m("Image uploaded successfully"),a.data}catch(a){throw u("Failed to upload image"),a}finally{S(!1)}},F=async e=>{e.preventDefault();const a={...l,techStack:l.techStack?l.techStack.split(",").map(s=>s.trim()).filter(s=>s):[]};try{if(n){const s=await h.update(n._id,a);c(b=>b.map(k=>k._id===n._id?s.data:k)),m("Project updated successfully")}else{const s=await h.create(a);c(b=>[...b,s.data]),m("Project added successfully")}v(),d(!1)}catch(s){console.error("Failed to save project:",s),u("Failed to save project")}},L=e=>{U(e),f({title:e.title||"",description:e.description||"",techStack:Array.isArray(e.techStack)?e.techStack.join(", "):"",imageUrl:e.imageUrl||"",videoUrl:e.videoUrl||"",liveUrl:e.liveUrl||"",githubUrl:e.githubUrl||""}),d(!0)},M=async()=>{if(g)try{await h.delete(g._id),c(e=>e.filter(a=>a._id!==g._id)),m("Project deleted successfully")}catch(e){console.error("Failed to delete project:",e),u("Failed to delete project")}finally{N(null),j(!1)}},v=()=>{f({title:"",description:"",techStack:"",imageUrl:"",videoUrl:"",liveUrl:"",githubUrl:""}),U(null)};return P?t.jsx(_,{text:"Loading projects..."}):t.jsxs("div",{className:"section-container",children:[t.jsxs("div",{className:"section-header",children:[t.jsx("h1",{children:"Projects Management"}),t.jsx("p",{children:"Manage your portfolio projects"})]}),t.jsxs("div",{className:"section-content",children:[t.jsx("div",{className:"section-actions",children:t.jsx("button",{className:"btn-primary",onClick:()=>{v(),d(!0)},children:"+ Add New Project"})}),y&&t.jsxs("div",{className:"form-card",children:[t.jsx("h2",{children:n?"Edit Project":"Add New Project"}),t.jsxs("form",{onSubmit:F,children:[t.jsx(o,{label:"Title",value:l.title,onChange:e=>i("title",e),required:!0,placeholder:"Project title"}),t.jsx(o,{label:"Description",value:l.description,onChange:e=>i("description",e),multiline:!0,rows:4,placeholder:"Project description",required:!0}),t.jsx(o,{label:"Tech Stack (comma separated)",value:l.techStack,onChange:e=>i("techStack",e),placeholder:"React, Node.js, MongoDB",helperText:"Separate technologies with commas"}),t.jsx(E,{label:"Project Image",onUpload:D,accept:"image/*",existingUrl:l.imageUrl}),t.jsx(o,{label:"Video URL (optional)",type:"url",value:l.videoUrl,onChange:e=>i("videoUrl",e),placeholder:"https://youtube.com/watch?v=..."}),t.jsx(o,{label:"Live URL (optional)",type:"url",value:l.liveUrl,onChange:e=>i("liveUrl",e),placeholder:"https://project-live-demo.com"}),t.jsx(o,{label:"GitHub URL (optional)",type:"url",value:l.githubUrl,onChange:e=>i("githubUrl",e),placeholder:"https://github.com/username/project"}),t.jsxs("div",{className:"form-actions",children:[t.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{d(!1),v()},disabled:x,children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn-primary",disabled:x,children:x?"Uploading...":n?"Update":"Create"})]})]})]}),t.jsx("div",{className:"items-grid",children:Array.isArray(p)&&p.length>0?p.map(e=>t.jsxs("div",{className:"item-card",children:[e.imageUrl&&t.jsx("div",{className:"item-image",children:t.jsx("img",{src:e.imageUrl,alt:e.title||"Project image"})}),t.jsxs("div",{className:"item-content",children:[t.jsx("h3",{className:"item-title",children:e.title||"Untitled Project"}),t.jsx("p",{className:"item-description",children:e.description?e.description.length>150?`${e.description.substring(0,150)}...`:e.description:"No description provided"}),Array.isArray(e.techStack)&&e.techStack.length>0&&t.jsx("div",{className:"item-tech",children:e.techStack.map((a,s)=>t.jsx("span",{className:"tech-tag",children:a},s))}),t.jsxs("div",{className:"item-links",children:[e.liveUrl&&t.jsx("a",{href:e.liveUrl,target:"_blank",rel:"noopener noreferrer",className:"project-link",children:"ðŸŒ Live Demo"}),e.githubUrl&&t.jsx("a",{href:e.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"project-link",children:"ðŸ’» GitHub"})]}),t.jsxs("div",{className:"item-actions",children:[t.jsx("button",{className:"btn-edit",onClick:()=>L(e),children:"Edit"}),t.jsx("button",{className:"btn-delete",onClick:()=>{N(e),j(!0)},children:"Delete"})]})]})]},e._id||e.id)):!y&&t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"empty-icon",children:"ðŸ“‚"}),t.jsx("h3",{children:"No Projects Yet"}),t.jsx("p",{children:"Add your first project to showcase in your portfolio"}),t.jsx("button",{className:"btn-primary",onClick:()=>d(!0),children:"Add First Project"})]})})]}),t.jsx(T,{isOpen:C,onClose:()=>j(!1),onConfirm:M,title:"Delete Project",message:"Are you sure you want to delete this project? This action cannot be undone.",confirmText:"Delete Project"})]})};export{V as default};
